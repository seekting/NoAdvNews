### <center>加载机制



#### 刚进首页 读取所有缓存-网络
``` flow
进首页=>start: 进首页:>
结束=>end: 结束
显示成功 =>operation: 显示成功
显示失败=>operation: 显示失败
出进度条调用requset=>operation: 出进度条调用requset
请求网络=>operation: 请求网络
是否有缓存=>condition: 是否有缓存?
读取数据库前20条=>operation: 读取数据库前20条
是否请求成功=>condition: 是否请求成功
插入数据库=>operation: 插入数据库

进首页->出进度条调用requset->是否有缓存
是否有缓存(yes)->读取数据库前20条->显示成功 ->结束
是否有缓存(no)->请求网络->是否请求成功
是否请求成功(yes)->插入数据库(left)->读取数据库前20条
是否请求成功(no)->显示失败->结束

```

1. 下拉刷新 网络-成功把新的数据放在前面一起加载，失败给提示
```flow

开始=>start: 下拉刷新
结束=>end: 结束
请求网络=>operation: 请求网络
请求是否成功=>condition: 请求是否成功
去掉数据库有的数据=>operation: 去掉数据库有的数据
是否有新数据插入=>condition: 是否有新数据插入
存数据库=>operation: 存数据库
显示原来页界面=>operation: 显示原来页界面
显示新页界面=>operation: 显示新页界面
将新数据加到老数据头部=>operation: 将新数据加到老数据头部

开始->请求网络->请求是否成功
请求是否成功(yes)->去掉数据库有的数据->是否有新数据插入
请求是否成功(no)->显示原来页界面->结束
是否有新数据插入(yes)->存数据库->将新数据加到老数据头部->显示新页界面->结束
是否有新数据插入(no)->显示原来页界面->结束

```



1. 上滑加载 网络-成功把新数据放在尾部加载

```flow
开始=>start: 上滑加载更多
找到最后一条缓存数据查询最近20条
结束=>end: 结束

```